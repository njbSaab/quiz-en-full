<ng-container *ngIf="isvisible">
  <app-banner
    [quizCount]="quizzes.length"
    (close)="hideBanner()"
    (showAll)="showAllQuizzes()"
    [page]="page"
  ></app-banner>
</ng-container>

<div [ngClass]="{ 'h-space': !isvisible }" class="quiz-list mx-w-1200">
  <ng-container *ngIf="quizzes?.length; else loading" >
    <div
      class="bg-gradient-to-b from-fuchsia-500 to-cyan-400 rounded-box py-0 md:py-5"
    >
      <div
        class="quiz-list-wrapper grid grid-cols-1 lg:grid-cols-3"
        [@listAnimation]
      >
        <div
          class="card quiz-item bg-card-gradient max-w-[450px] mx-auto w-full"
          *ngFor="let quiz of filteredQuizzes"
          [routerLink]="['/quiz', quiz.id]"
          data-gtm-card
          [attr.data-gtm-quiz-id]="quiz.id"
          [attr.data-gtm-title]="quiz.title"
          [attr.data-gtm-action]="'click_card'"
        >
          <figure>
            <img
              *ngIf="quiz.previewImage"
              [src]="quiz.previewImage"
              alt="{{ quiz.title }}"
            />
          </figure>
          <div class="card-body">
            <div class="card-body-header flex justify-between items-center">
              <span class="text-sm text-green-400">{{
                quiz.createdAt | date
              }}</span>
              <div class="rating">
                <input
                  *ngFor="let star of [1, 2, 3, 4, 5]; let i = index"
                  type="radio"
                  name="rating-{{ quiz.id }}"
                  class="mask mask-star bg-red-v"
                  [ngClass]="{ filled: i < (quiz.rating || 0) }"
                />
              </div>
            </div>
            <h2 class="card-title">{{ quiz.title }}</h2>
            <p>{{ quiz.description }}</p>
          </div>
          
          <div class="card-actions justify-end card-footer">
            <button class="btn btn-accent btn-card text-base-200">
              <span>
                <svg
                  class="h-10 w-10 fill-current"
                  xmlns="http://www.w3.org/2000/svg"
                  width="32"
                  height="32"
                  viewBox="0 0 24 24"
                >
                  <path d="M8 5v14l11-7z" />
                </svg>
              </span>
              Start Now ðŸ¤©
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <ng-template #loading>
    <div class="loading-container text-center h-screen">
      <span class="loading loading-ring text-accent loading-xl"></span>
      <span class="loading loading-ring text-regular loading-md"></span>
    </div>
  </ng-template>
</div>
