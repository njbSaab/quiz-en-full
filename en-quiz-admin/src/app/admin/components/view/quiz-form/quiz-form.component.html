<div class="card bg-base-100 mx-auto shadow-block h-full overflow-y-auto">
    <div class="mt-4 px-[16px]">
      <!-- –û—à–∏–±–∫–∞ -->
      <div *ngIf="errorMessage" class="alert alert-error relative mb-4">
        {{ errorMessage }}
        <span class="close" (click)="errorMessage = null">X</span>
      </div>
  
      <!-- –ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
      <figure *ngIf="formQuiz.previewImage">
        <img [src]="formQuiz.previewImage" alt="Preview" class="max-w-full h-auto" (error)="formQuiz.previewImage = ''" />
      </figure>
  
      <!-- –§–æ—Ä–º–∞ -->
      <div class="edit-quiestion-wrapper questions-wrapper">
        <h3 class="text-2xl text-center font-bold text-black mt-[30px] mb-2">
          –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–≤–∏–∑–∞: 
        </h3>
        <!-- –ê–∫—Ç–∏–≤–µ–Ω -->
         <div class="controll-wrapper flex items-center justify-center gap-8 my-4">
            <div class="form-controll flex items-center gap-2">
              <input [(ngModel)]="formQuiz.isActive" (ngModelChange)="onQuizChange()" type="checkbox" class="checkbox checkbox-success" />
            </div>        
            <!-- –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω–æ–π -->
            <div class="form-controll flex items-center">
              <label class="block text-lg text-danger">‚ùóÔ∏è –ù–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—ã–≤–æ–¥–∏–º?</label>
              <input [(ngModel)]="formQuiz.isMainView" (ngModelChange)="onQuizChange()" type="checkbox" class="checkbox checkbox-warning" />
            </div>
            <!-- –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω–æ–π -->
            <div class="form-controll flex items-center">
              <label class="block text-lg text-danger">‚≠êÔ∏è –†–µ–π—Ç–∏–Ω–≥:</label>
              <input
                [(ngModel)]="formQuiz.rating"
                (ngModelChange)="onQuizChange()"
                type="text"
                placeholder="0"
                class="input w-20" />
            </div>
         </div>
        <!-- –ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
        <label class="block text-lg text-indigo-400 mt-4">–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
        <span *ngIf="isDraftLoaded" class="text-primary text-xs italic ml-2">
          –í–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ(—á–µ—Ä–Ω–æ–≤–∏–∫). –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–≤–∏–∑, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å.
        </span>
        <input [(ngModel)]="formQuiz.previewImage" (input)="refreshImage()" (ngModelChange)="onQuizChange()" type="text" placeholder="https://quvi.top4winners.top/images..." class="input block w-full placeholder-gray-500 border border-indigo-200 bg-white px-5 py-2.5 text-gray-800 focus:border-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300 focus:ring-opacity-40 ng-pristine ng-valid ng-touched" />
        <!-- –ù–∞–∑–≤–∞–Ω–∏–µ -->
        <label class="block text-lg text-indigo-400">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–≤–∏–∑–∞ üáªüá≥</label>
        <span *ngIf="isDraftLoaded" class="text-primary text-xs italic ml-2">
          –í–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ(—á–µ—Ä–Ω–æ–≤–∏–∫). –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–≤–∏–∑, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å.
        </span>
        <input [(ngModel)]="formQuiz.title" (ngModelChange)="onQuizChange()" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" class="input block w-full placeholder-gray-500 border border-indigo-200 bg-white px-5 py-2.5 text-gray-800 focus:border-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300 focus:ring-opacity-40 ng-pristine ng-valid ng-touched" />
        <!-- –ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–∞ -->
        <label class="block text-lg text-indigo-400 mt-4">–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–∞ üòé</label>
        <span *ngIf="isDraftLoaded" class="text-primary text-xs italic ml-2">
          –í–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ(—á–µ—Ä–Ω–æ–≤–∏–∫). –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–≤–∏–∑, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å.
        </span>
        <input [(ngModel)]="formQuiz.titleAdm" (ngModelChange)="onQuizChange()" type="text" placeholder="–î–ª—è –∞–¥–º–∏–Ω–∫–∏" class="input block w-full placeholder-gray-500 border border-indigo-200 bg-white px-5 py-2.5 text-gray-800 focus:border-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300 focus:ring-opacity-40 ng-pristine ng-valid ng-touched" />

        <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
        <label class="block text-lg text-indigo-400 mt-4">–û–ø–∏—Å–∞–Ω–∏–µ üáªüá≥</label>
        <span *ngIf="isDraftLoaded" class="text-primary text-xs italic ml-2">
          –í–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ(—á–µ—Ä–Ω–æ–≤–∏–∫). –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–≤–∏–∑, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å.
        </span>
        <textarea [(ngModel)]="formQuiz.description" (ngModelChange)="onQuizChange()" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" class="textarea w-full h-[100px] rounded-[22px] placeholder-gray-500 border border-indigo-200 bg-white px-5 py-2.5 text-gray-800 focus:border-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300 focus:ring-opacity-40 ng-pristine ng-valid ng-touched"></textarea>
  
        <!-- –û–ø–∏—Å–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∞ -->
        <label class="block text-lg text-indigo-400 mt-4">–û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–∞ üòé</label>
        <span *ngIf="isDraftLoaded" class="text-primary text-xs italic ml-2">
          –í–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ(—á–µ—Ä–Ω–æ–≤–∏–∫). –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–≤–∏–∑, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å.
        </span>
        <textarea [(ngModel)]="formQuiz.descriptionAdm" (ngModelChange)="onQuizChange()" placeholder="–î–ª—è –∞–¥–º–∏–Ω–æ–≤" class="textarea w-full h-[100px] rounded-[22px] placeholder-gray-500 border border-indigo-200 bg-white px-5 py-2.5 text-gray-800 focus:border-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300 focus:ring-opacity-40 ng-pristine ng-valid ng-touched"></textarea>
  
        <!-- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <label class="block text-lg text-indigo-400 mt-4">–¢–µ–∫—Å—Ç –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã üáªüá≥</label>
        <span *ngIf="isDraftLoaded" class="text-primary text-xs italic ml-2">
          –í–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ(—á–µ—Ä–Ω–æ–≤–∏–∫). –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–≤–∏–∑, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å.
        </span>
        <textarea [(ngModel)]="formQuiz.firstPage" (ngModelChange)="onQuizChange()" placeholder="–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ" class="textarea w-full h-[100px] rounded-[22px] placeholder-gray-500 border border-indigo-200 bg-white px-5 py-2.5 text-gray-800 focus:border-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300 focus:ring-opacity-40 ng-pristine ng-valid ng-touched"></textarea>
        <!-- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <label class="block text-lg text-indigo-400 mt-4">–¢–µ–∫—Å—Ç –ø–µ—Ä–≤–æ–π –¥–ª—è –∞–¥–º–∏–Ω–∞ üòé</label>
                        <span *ngIf="isDraftLoaded" class="text-primary text-xs italic ml-2">
                  –í–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ(—á–µ—Ä–Ω–æ–≤–∏–∫). –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–≤–∏–∑, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å.
                </span>
        <textarea [(ngModel)]="formQuiz.descrip" (ngModelChange)="onQuizChange()" placeholder="–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ" class="textarea w-full h-[100px] rounded-[22px] placeholder-gray-500 border border-indigo-200 bg-white px-5 py-2.5 text-gray-800 focus:border-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300 focus:ring-opacity-40 ng-pristine ng-valid ng-touched"></textarea>

        <h3 class="text-2xl text-center font-bold text-black mt-[50px]">–¢–∏–ø –∫–≤–∏–∑–∞:</h3>
        <div class="content-choice flex gap-8 mt-8 mb-4 justify-center">
            <div
      class="point-mode btn-block shadow-2xl px-8 py-6 rounded-3xl cursor-pointer transition-all duration-300"
            [class.bg-gradient-to-r]="selectedType === 'POINTS'"
            [class.from-indigo-500]="selectedType === 'POINTS'"
            [class.to-blue-500]="selectedType === 'POINTS'"
            [class.text-white]="selectedType === 'POINTS'"
            [class.bg-base-200]="selectedType !== 'POINTS'"
            [class.text-gray-700]="selectedType !== 'POINTS'"
            [class.hover-shadow]="selectedType !== 'POINTS'"
            (click)="switchType('POINTS')">
            <p class="text-xl font-bold">–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ —Å –±–∞–ª–ª–∞–º–∏</p>
            <p class="text-sm opacity-80">–û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º —Å—É–º–º–∏—Ä—É—é—Ç—Å—è –±–∞–ª–ª—ã</p>
          </div>

          <div
          class="choise-mode btn-block shadow-2xl px-8 py-6 rounded-3xl cursor-pointer transition-all duration-300 hover-shadow"
            [class.bg-gradient-to-r]="selectedType === 'MAJORITY'"
            [class.from-purple-500]="selectedType === 'MAJORITY'"
            [class.to-pink-500]="selectedType === 'MAJORITY'"
            [class.text-white]="selectedType === 'MAJORITY'"
            [class.bg-base-200]="selectedType !== 'MAJORITY'"
            [class.text-gray-700]="selectedType !== 'MAJORITY'"
            [class.hover-shadow]="selectedType !== 'MAJORITY'"
            (click)="switchType('MAJORITY')">
            <p class="text-xl font-bold">–ü—Ä–µ–æ–±–ª–∞–¥–∞—é—â–∏–π –æ—Ç–≤–µ—Ç</p>
            <p class="text-sm opacity-80">–ö–∞–∫–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ –±–æ–ª—å—à–µ</p>
          </div>
        </div>

        <!-- –í–æ–ø—Ä–æ—Å—ã -->
       <h3 class="text-2xl text-center font-bold text-black mt-[80px] mb-2">–í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã:</h3>
        <div *ngFor="let question of formQuiz.questions; let i = index" class="questions-wrapper mt-4 p-4 border rounded-lg">
          <div class="flex justify-between items-center mb-2">
            <label class="text-xl text-indigo-500 font-bold">–í–æ–ø—Ä–æ—Å {{ i + 1 }}</label>
            <button (click)="removeQuestion(i)" class="btn btn-sm"> –£–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å <svg  xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path fill="#f00" d="M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2m2.59 6L12 10.59L9.41 8L8 9.41L10.59 12L8 14.59L9.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41z"></path></svg></button>
          </div>
                          <span *ngIf="isDraftLoaded" class="text-primary text-xs italic ml-2">
                  –í–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ(—á–µ—Ä–Ω–æ–≤–∏–∫). –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–≤–∏–∑, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å.
                </span>
          <textarea [(ngModel)]="question.text" (ngModelChange)="onQuizChange()" type="text" placeholder="–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞" class="input block w-full placeholder-gray-500 border border-indigo-200 bg-white px-5 py-2.5 text-gray-800 focus:border-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300 focus:ring-opacity-40 ng-pristine ng-valid ng-touched" ></textarea>
          <label class="block text-lg text-indigo-400 mt-2">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
          
          <input [(ngModel)]="question.image"  (ngModelChange)="onQuizChange()" type="text" placeholder="URL" class="input block w-full placeholder-gray-500 border border-red-200 bg-white px-5 py-2.5 text-gray-800 focus:border-red-500 focus:outline-none focus:ring focus:ring-red-300 focus:ring-opacity-40 ng-pristine ng-valid ng-touched" />
  
          <div *ngFor="let answer of question.answers; let j = index" class="mt-2 flex gap-2 items-center">
            <input [(ngModel)]="answer.text" (ngModelChange)="onQuizChange()" type="text" placeholder="–û—Ç–≤–µ—Ç" class="input flex-1 placeholder-gray-500 border border-green-200 bg-white px-5 py-2.5 text-gray-800 focus:border-green-500 focus:outline-none focus:ring focus:ring-green-300 focus:ring-opacity-40 ng-pristine ng-valid ng-touched" />
            <label class="flex items-center gap-1" *ngIf="selectedType === 'POINTS'">
                <input [(ngModel)]="answer.isCorrect" type="checkbox" class="checkbox checkbox-success checkbox-sm" />
                <span class="text-sm">–ü—Ä–∞–≤–∏–ª—å–Ω–æ</span>
              </label>
              <input
                  *ngIf="selectedType === 'POINTS'"
                  [(ngModel)]="answer.points"
                  type="number"
                  placeholder="0"
                  class="input w-20" />

            <!-- –í MAJORITY –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–∞–ª–ª —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è -->
            <div *ngIf="selectedType === 'MAJORITY'" class="w-20 text-center font-bold text-purple-600">
              {{ answer.points }}
            </div>
            <button (click)="removeAnswer(i, j)" class="btn btn-circle icon-cancel hover:btn-error hover:fill-white hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path fill="#e54545" d="M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12l1.41 1.41L13.41 14l2.12 2.12l-1.41 1.41L12 15.41l-2.12 2.12l-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"></path></svg></button>
          </div>
          <button class="btn btn-sm mt-2" (click)="addAnswer(i)">+ –û—Ç–≤–µ—Ç</button>
        </div>
  
        <div class="text-center mt-4">
          <button class="btn btn-success" (click)="addQuestion()">+ –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
        </div>



<h3 class="text-2xl text-center font-bold text-black mt-[80px] mb-2">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ email-–ø–∏—Å–µ–º:</h3>

<!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å: –ü–∏—Å—å–º–æ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º vs –¶–µ–ø–æ—á–∫–∞ –ø–∏—Å–µ–º -->
<div class="content-choice flex gap-8 mt-8 mb-4 justify-center">
  <!-- –ü–∏—Å—å–º–æ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º -->
  <div
    class="result-email-mode btn-block shadow-2xl px-8 py-6 rounded-3xl cursor-pointer transition-all duration-300"
    [class.bg-gradient-to-r]="selectedEmailMode === 'result'"
    [class.from-green-500]="selectedEmailMode === 'result'"
    [class.to-emerald-500]="selectedEmailMode === 'result'"
    [class.text-white]="selectedEmailMode === 'result'"
    [class.bg-base-200]="selectedEmailMode !== 'result'"
    [class.text-gray-700]="selectedEmailMode !== 'result'"
    [class.hover-shadow]="selectedEmailMode !== 'result'"
    (click)="switchEmailMode('result')">
    <p class="text-xl font-bold">üìß –ü–∏—Å—å–º–æ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º</p>
    <p class="text-sm opacity-80">–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–≤–∏–∑–∞</p>
  </div>

  <!-- –¶–µ–ø–æ—á–∫–∞ –ø–∏—Å–µ–º -->
  <div
    class="chain-email-mode btn-block shadow-2xl px-8 py-6 rounded-3xl cursor-pointer transition-all duration-300"
    [class.bg-gradient-to-r]="selectedEmailMode === 'chain'"
    [class.from-orange-500]="selectedEmailMode === 'chain'"
    [class.to-red-500]="selectedEmailMode === 'chain'"
    [class.text-white]="selectedEmailMode === 'chain'"
    [class.bg-base-200]="selectedEmailMode !== 'chain'"
    [class.text-gray-700]="selectedEmailMode !== 'chain'"
    [class.hover-shadow]="selectedEmailMode !== 'chain'"
    (click)="switchEmailMode('chain')">
    <p class="text-xl font-bold">üì¨ –¶–µ–ø–æ—á–∫–∞ –ø–∏—Å–µ–º (Follow-up)</p>
    <p class="text-sm opacity-80">–°–µ—Ä–∏—è –ø–∏—Å–µ–º —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤—Ä–µ–º–µ–Ω–∏</p>
  </div>
</div>

<!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞ -->
<div class="email-template-content mt-8">
  
  <!-- –†–µ–∂–∏–º: –ü–∏—Å—å–º–æ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º -->
  <div *ngIf="selectedEmailMode === 'result'">
    <h4 class="text-xl font-bold text-green-500 mb-4 text-center">
      –®–∞–±–ª–æ–Ω –ø–∏—Å—å–º–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∫–≤–∏–∑–∞
    </h4>
    
    <!-- –í–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç mail-template -->
    <app-mail-template
      [type]="selectedType"
      [(quizInfo)]="formQuiz.quizInfo!"
      [(resultMessages)]="formQuiz.resultMessages!">
    </app-mail-template>
  </div>

  <!-- –†–µ–∂–∏–º: –¶–µ–ø–æ—á–∫–∞ –ø–∏—Å–µ–º -->
  <div *ngIf="selectedEmailMode === 'chain'">
    <h4 class="text-xl font-bold text-orange-500 mb-4 text-center">
      –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ø–æ—á–∫–∏ Follow-up –ø–∏—Å–µ–º
    </h4>

    <div class="bg-orange-50 p-4 rounded-lg mb-6">
      <p class="text-sm text-gray-700">
        üí° <strong>–°–æ–≤–µ—Ç:</strong> Follow-up –ø–∏—Å—å–º–∞ –ø–æ–º–æ–≥–∞—é—Ç –Ω–∞–ø–æ–º–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –∫–≤–∏–∑–∞
        –∏ –ø–æ–≤—ã—Å–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∏—Å–µ–º —Å –Ω—É–∂–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏.
      </p>
    </div>

    <!-- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ —Ü–µ–ø–æ—á–∫–∏ –ø–∏—Å–µ–º -->
    <app-chain-emails-template
      [quizId]="formQuiz.id"
      (saved)="onEmailTemplateSaved()">
    </app-chain-emails-template>

    <!-- –ï—Å–ª–∏ –∫–≤–∏–∑ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω -->
    <div *ngIf="!formQuiz.id" class="alert alert-warning">
      <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
      </svg>
      <span>
        –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –∫–≤–∏–∑, –∑–∞—Ç–µ–º –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ü–µ–ø–æ—á–∫—É –ø–∏—Å–µ–º
      </span>
    </div>
  </div>

</div>

        <!-- –ö–Ω–æ–ø–∫–∏ -->
        <div class="card-actions justify-center pt-10 pb-5 gap-4">
          <button class="btn btn-ghost btn-error" (click)="cancel()">–û—Ç–º–µ–Ω–∞ ‚ùå</button>
          <button
            class="btn btn-ghost btn-success"
            (click)="save()"
            [disabled]="isLoading"
          >
            <span *ngIf="isLoading" class="loading loading-spinner"></span>
            {{ mode === 'create' ? '–°–æ–∑–¥–∞—Ç—å –ö–≤–∏–∑ ‚úÖ' : '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å ‚úÖ' }}
          </button>
        </div>
      </div>
    </div>
    <!-- –£–°–ü–ï–• -->
<div *ngIf="successMessage" class="alert alert-success shadow-lg mb-4 w-fit">
    <span class="font-bold text-lg">{{ successMessage }}</span>
    <div class="flex-none">
      <button class="btn btn-sm btn-ghost" (click)="successMessage = null">√ó</button>
    </div>
  </div>
  
  <!-- –û–®–ò–ë–ö–ê -->
  <div *ngIf="errorMessage" class="alert alert-error shadow-lg mb-4 w-fit max-w-fit">
    <span class="font-bold text-lg">{{ errorMessage }}</span>
    <div class="flex-none">
      <button class="btn btn-sm btn-ghost" (click)="errorMessage = null">√ó</button>
    </div>
  </div>
</div>
  