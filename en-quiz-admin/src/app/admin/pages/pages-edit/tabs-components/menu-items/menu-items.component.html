<section class="pages">
  <div class="flex items-center gap-4 mb-0">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="40"
      height="48"
      viewBox="0 0 24 24"
      class="text-indigo-500"
    >
      <g
        fill="none"
        stroke="#6366f1"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
      >
        <path stroke-dasharray="20" stroke-dashoffset="20" d="M3 21h18">
          <animate
            fill="freeze"
            attributeName="stroke-dashoffset"
            dur="0.2s"
            values="20;0"
          />
        </path>
        <path
          fill="#6366f1"
          fill-opacity="0"
          stroke-dasharray="48"
          stroke-dashoffset="48"
          d="M7 17v-4l10 -10l4 4l-10 10h-4"
        >
          <animate
            fill="freeze"
            attributeName="fill-opacity"
            begin="1.1s"
            dur="0.5s"
            values="0;1"
          />
          <animate
            fill="freeze"
            attributeName="stroke-dashoffset"
            begin="0.2s"
            dur="0.6s"
            values="48;0"
          />
        </path>
        <path stroke-dasharray="8" stroke-dashoffset="8" d="M14 6l4 4">
          <animate
            fill="freeze"
            attributeName="stroke-dashoffset"
            begin="0.8s"
            dur="0.2s"
            values="8;0"
          />
        </path>
      </g>
    </svg>
    <h2 class="text-3xl font-bold text-indigo-600">Редактирование пунктов меню</h2>
  </div>

  <!-- menu-items.component.html -->
<div class="flex flex-col lg:flex-row gap-8 items-start mt-4 pb-20 max-w-[850px] w-full mx-auto">
  <!-- ================== ЛЕВАЯ ЧАСТЬ: РЕДАКТОР ================== -->
  <div class="w-full lg:w-5/12 space-y-6">
    <div class="p-6">

      <div class="space-y-2">
        <!-- Список всех пунктов меню -->
        <div *ngFor="let item of editableItems; let i = index" 
             class="relative card p-4 pt-2 shadow-xl border border-transparent hover:border-indigo-600 transition-all">
          
          <!-- Заголовок пункта + номер + кнопки -->
          <div class="flex items-start justify-between flex-col">
            <label class="text-lg text-gray-500 font-bold pb-2">{{item.id}}</label>
            <div class="flex items-center gap-3">
              <span class="flex items-center justify-center w-8 h-8 rounded-full bg-info text-primary-content font-bold text-sm">
                {{ i + 1 }}
              </span>
              <input
                [(ngModel)]="item.label"
                (input)="onFieldChange()"
                placeholder="Название пункта"
                class="input input-bordered focus:ring-indigo-600 input-sm flex-1 font-medium"
              />
            </div>
          </div>
        </div>
      </div>

      <!-- Блок сохранения -->
      <div class="mt-10">
        <button
          class="btn btn-primary w-full"
          (click)="saveManually()"
          [disabled]="saving || !hasChanges"
        >
          <span class="loading loading-spinner" *ngIf="saving"></span>
          Сохранить изменения
        </button>

        <div class="text-center mt-3 text-sm"
             [ngClass]="{
               'text-success': saveStatus === 'success',
               'text-error': saveStatus === 'error',
               'text-info': saveStatus === 'saving'
             }">
          {{ saveMessage || (hasChanges ? 'Есть несохранённые изменения' : 'Все сохранено') }}
        </div>
      </div>
    </div>
  </div>

  <!-- ================== ПРАВАЯ ЧАСТЬ: ПРЕВЬЮ ================== -->
  <div class="w-full lg:w-7/12">
    <div class="mockup-phone border-primary mx-auto w-full flex" style="max-width: 400px;">
      <div class="phone-content bg-gradient-to-b from-black to-base-950 min-h-[680px] relative overflow-hidden">
        <!-- Само боковое меню -->
          <ul class="menu bg-black/90 min-h-full w-80 text-white p-0 shadow-2xl">
            <!-- Шапка -->
            <li class="border-b border-white/10">
              <div class="flex flex-row justify-center items-center py-6 relative px-4">
                <img
                  src="https://i.ibb.co/Qvd3RYXX/5.png"
                  alt="VoteVibe"
                  class="w-14 h-14 object-contain"
                />
                <span class="ml-4 text-3xl font-bold tracking-tight">
                  <span class="bg-gradient-to-r from-fuchsia-400 via-cyan-300 to-violet-400 bg-clip-text text-transparent">
                    VoteVibe
                  </span>
                </span>

                <!-- Крестик (визуально) -->
                <svg class="absolute right-5 top-6 w-8 h-8 opacity-60"
                     xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 18L18 6M6 6l12 12"/>
                </svg>
              </div>
            </li>

            <!-- Пункты меню -->
            <li *ngFor="let item of editableItems">
              <a *ngIf="item.isVisible"
                 class="flex justify-between items-center py-4 px-6 text-base hover:bg-white/10 transition-colors"
                 [class.opacity-50]="!item.isVisible">
                <span>{{ item.label }}</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/>
                </svg>
              </a>
            </li>
          </ul>
        </div>
      </div>
  </div>
</div>
</section>